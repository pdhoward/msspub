{"version":3,"sources":["components/CardBody.js","components/Counter.js","App.js","index.js"],"names":["CardBody","product","toggle","change","style","text","className","onClick","socketurl","url","toggleurl","location","hostname","socket","W3CWebSocket","Counter","useState","setProduct","setToggle","useEffect","fetch","then","response","json","data","console","log","state","catch","err","error","onopen","onmessage","message","JSON","parse","type","App","ReactDOM","render","document","getElementById"],"mappings":"6JAmBeA,EAjBE,SAAC,GAA+B,IAA9BC,EAA6B,EAA7BA,QAASC,EAAoB,EAApBA,OAAQC,EAAY,EAAZA,OAC5BC,EAAO,kBACPC,EAAO,QAKb,OAJMH,IACAE,EAAQ,iBACRC,EAAO,QAGX,sBAAKC,UAAU,YAAf,UACE,oBAAGA,UAAU,YAAb,4BAAyCL,KACzC,wBAAQK,UAAWF,EAAOG,QAASJ,EAAnC,SACGE,IACO,Q,OCVZG,EAAY,GACZC,EAAM,GACNC,EAAY,GAES,aAArBC,SAASC,UACTH,EAAG,iBAAa,iBAAmB,eACnCC,EAAS,iBAAa,iBAAmB,eACzCF,EAAS,eAAW,oBAEpBC,EAAM,yCACNC,EAAY,yCACZF,EAAS,6BAGb,IAAMK,EAAS,IAAIC,eAAaN,GAwDjBO,EAtDC,WACd,MAA8BC,mBAAS,GAAvC,mBAAOf,EAAP,KAAgBgB,EAAhB,KACA,EAA4BD,oBAAS,GAArC,mBAAOd,EAAP,KAAegB,EAAf,KAGAC,qBAAU,WACRC,MAAMV,GACDW,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACJC,QAAQC,IAAIF,GACVN,EAAUM,EAAKG,UAElBC,OAAM,SAAAC,GAAG,OAAIJ,QAAQK,MAAMD,QAC/B,IAEHV,qBAAU,WACRN,EAAOkB,OAAS,WACdN,QAAQC,IAAI,+BAEdb,EAAOmB,UAAY,SAACC,GAClB,IAAIT,EAAOU,KAAKC,MAAMF,EAAQT,MAGV,OAAhBA,EAAK,GAAGY,MAEXnB,EAAWhB,EAAU,GAGF,UAAhBuB,EAAK,GAAGY,MAEVlB,EAAUM,EAAK,GAAGG,WAQtB,OACE,sBAAKrB,UAAU,mBAAf,UACE,sBAAKA,UAAU,oCAAf,UACG,uDACA,8EAEH,cAAC,EAAD,CACKL,QAASA,EACTE,OAXI,WACbiB,MAAMX,IAWGP,OAAQA,QC5DNmC,MAJf,WACE,OAAO,cAAC,EAAD,K,MCCTC,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.7002d667.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst CardBody = ({product, toggle, change}) => {   \r\n    let style= \"btn btn-primary\"\r\n    let text = \"START\"\r\n    if (toggle) {\r\n        style = \"btn btn-danger\"\r\n        text = \"STOP\"\r\n    }\r\n  return (\r\n    <div className=\"card-body\">\r\n      <p className=\"card-text\">Product Count: {product}</p>      \r\n      <button className={style} onClick={change}>\r\n        {text}\r\n      </button>{\" \"}      \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CardBody;","import React, {useState, useEffect} from \"react\";\r\nimport CardBody from \"./CardBody\";\r\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\r\n\r\nlet socketurl = ''\r\nlet url = ''\r\nlet toggleurl = ''\r\n\r\nif (location.hostname == 'localhost' ) {\r\n    url = `http://${'localhost:5000'}${'/api/signal'}`\r\n    toggleurl = `http://${'localhost:5000'}${'/api/toggle'}`\r\n    socketurl = `ws://${'localhost:5000'}`\r\n} else {\r\n    url = 'https://msspub.onrender.com/api/signal'\r\n    toggleurl = 'https://msspub.onrender.com/api/toggle'\r\n    socketurl = `wss://msspub.onrender.com`\r\n}\r\n\r\nconst socket = new W3CWebSocket(socketurl);\r\n\r\nconst Counter = () => {\r\n  const [product, setProduct] = useState(0) \r\n  const [toggle, setToggle] = useState(false)\r\n\r\n  // on component load set the button state based on server state\r\n  useEffect(() => {\r\n    fetch(toggleurl)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          console.log(data)\r\n            setToggle(data.state)\r\n        })\r\n        .catch(err => console.error(err))\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    socket.onopen = () => {\r\n      console.log('WebSocket Client Connected');\r\n    };\r\n    socket.onmessage = (message) => { \r\n      let data = JSON.parse(message.data)\r\n      \r\n      // product \r\n      if (data[0].type == 'tag') {\r\n        // increment product\r\n       setProduct(product + 1)\r\n      }      \r\n       // button state\r\n      if (data[0].type == 'status') { \r\n        // toggle button\r\n        setToggle(data[0].state)\r\n     }    \r\n       \r\n    }\r\n  })\r\n  const change = () => {   \r\n    fetch(url)        \r\n}\r\n    return (\r\n      <div className=\"card text-center\">\r\n        <div className=\"card-header bg-primary text-white\">\r\n           <h3>MSS International Lab</h3>\r\n           <h4>Workbench Messages Sent From Kafka Stream</h4>\r\n        </div>\r\n        <CardBody\r\n             product={product}            \r\n             change={change}\r\n             toggle={toggle}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\nexport default Counter;","import React from \"react\";\r\nimport Counter from \"./components/Counter\";\r\n\r\nfunction App() {\r\n  return <Counter />;\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}